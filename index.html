<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GRIT Phonics Corner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --emerald: #047857; --beige: #F5F5DC; }
        body { font-family: 'Quicksand', sans-serif; background-color: var(--beige); color: #064E3B; overflow: hidden; }
        .emerald-card { background: white; border-bottom: 8px solid #064E3B; border-radius: 2rem; shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .btn-action { background-color: var(--emerald); color: white; border-bottom: 6px solid #064E3B; transition: 0.1s; border-radius: 1rem; }
        .btn-action:active { border-bottom: 0px; transform: translateY(6px); }
        .progress-bar { height: 12px; background: #E5E7EB; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--emerald); transition: width 0.5s ease; }
    </style>
</head>
<body class="h-screen flex flex-col items-center p-6">

    <header class="w-full max-w-md flex justify-between items-center mb-6">
        <div>
            <h1 class="text-2xl font-black text-[#064E3B]">GRIT <span class="text-emerald-700">PHONICS</span></h1>
            <p id="stage-label" class="text-xs font-bold uppercase tracking-widest opacity-70">Stage: Basic</p>
        </div>
        <div class="text-right">
            <div class="text-2xl">‚≠ê <span id="star-count">0</span></div>
        </div>
    </header>

    <main class="w-full max-w-md flex-1 flex flex-col items-center justify-center">
        <div class="w-full emerald-card p-8 flex flex-col items-center mb-8 relative">
            <div id="level-indicator" class="absolute top-4 left-6 text-sm font-bold text-emerald-700">Level 1</div>
            
            <div id="letter-display" class="text-9xl font-black text-emerald-800 mb-8 animate-bounce">S</div>
            
            <div class="w-full space-y-4">
                <button onclick="playSound()" class="w-full p-4 bg-emerald-50 rounded-xl border-2 border-emerald-200 text-emerald-700 font-bold flex items-center justify-center gap-2">
                    üîä Listen to Sound
                </button>
                <div class="progress-bar"><div id="progress-fill" class="progress-fill" style="width: 10%"></div></div>
            </div>
        </div>

        <button onclick="completeLevel()" class="btn-action w-full py-6 text-2xl font-black shadow-xl">
            NEXT LEVEL ‚Üí
        </button>
    </main>

    <footer class="mt-auto py-4">
        <button onclick="resetDatabase()" class="text-[10px] text-emerald-900/40 uppercase font-bold tracking-tighter hover:text-red-500">Reset All Learning Progress</button>
    </footer>

    <script>
        // 1. THE DATABASE (Curriculum + User Progress)
        const curriculum = [
            { id: 1, letter: 'S', stage: 'Basic' }, { id: 2, letter: 'A', stage: 'Basic' },
            { id: 3, letter: 'T', stage: 'Basic' }, { id: 4, letter: 'P', stage: 'Basic' },
            { id: 5, letter: 'I', stage: 'Basic' }, { id: 6, letter: 'N', stage: 'Basic' },
            { id: 7, letter: 'SH', stage: 'Intermediate' }, { id: 8, letter: 'CH', stage: 'Intermediate' }
        ];

        let userData = {
            currentLevelIndex: 0,
            stars: 0,
            mastered: []
        };

        // 2. DATABASE FUNCTIONS (Save/Load to Device)
        function initDatabase() {
            const savedData = localStorage.getItem('grit_phonics_db');
            if (savedData) {
                userData = JSON.parse(savedData);
                updateUI();
            }
        }

        function saveToDatabase() {
            localStorage.setItem('grit_phonics_db', JSON.stringify(userData));
        }

        function resetDatabase() {
            if(confirm("Are you sure? This will delete all stickers and progress.")) {
                localStorage.removeItem('grit_phonics_db');
                location.reload();
            }
        }

        // 3. GAME LOGIC
        function playSound() {
            const current = curriculum[userData.currentLevelIndex];
            const msg = new SpeechSynthesisUtterance(current.letter);
            msg.rate = 0.7;
            window.speechSynthesis.speak(msg);
        }

        function completeLevel() {
            userData.stars += 10;
            userData.currentLevelIndex = (userData.currentLevelIndex + 1) % curriculum.length;
            
            // Save to Local Database
            saveToDatabase();
            updateUI();

            // Success feedback
            const ding = new Audio('https://www.soundjay.com/buttons/sounds/button-3.mp3');
            ding.play().catch(() => {});
        }

        function updateUI() {
            const current = curriculum[userData.currentLevelIndex];
            document.getElementById('letter-display').innerText = current.letter;
            document.getElementById('star-count').innerText = userData.stars;
            document.getElementById('level-indicator').innerText = `Level ${current.id}`;
            document.getElementById('stage-label').innerText = `Stage: ${current.stage}`;
            
            const progressPercent = ((userData.currentLevelIndex + 1) / curriculum.length) * 100;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
        }

        // Initialize on Launch
        initDatabase();
        updateUI();
    </script>
</body>
</html>
